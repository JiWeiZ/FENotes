# 设计模式

## 发布订阅模式

发布订阅模式是观察者模式的一种变体。

观察者模式一般有2个对象，一个发布者和一个观察者。发布者发布消息，观察者订阅这个消息。

发布订阅模式一般有3个对象，一个发布者，一个changeManager，一个订阅者。发布者发布消息给manager，manager再发布消息给订阅者，订阅者从manager那里订阅消息。

发布订阅模式的适用场景：

1. 一对多：
   1. 发布者的某次更新只想通知部分订阅者
2. 多对一或多对多：
   1. 一个订阅者依赖多个发布者，是某个发布者更新后立刻通知订阅者，还是所有发布者全部更新后再通知订阅者？

可以说发布订阅模式的changeManager将消息发布时机的那部分逻辑抽离了出来。